{% extends "layout.html" %}
{% block content %}

<h2 class="h4 mb-1">Reproducci√≥n en directo</h2>

{% if source %}
<p class="text-muted small mb-4">
  Fuente: {{ source }}
</p>
{% endif %}

<!-- STREAM PRINCIPAL -->
<div class="ratio ratio-16x9 rounded overflow-hidden shadow-sm mb-4">
  {% if url %}
  <iframe src="{{ url }}" allowfullscreen loading="lazy" style="width:100%; height:100%; border:0;">
  </iframe>
  {% else %}
  <div class="d-flex justify-content-center align-items-center h-100 text-muted">
    <p>No hay stream principal disponible.</p>
  </div>
  {% endif %}
</div>

<!-- CANALES DISPONIBLES -->
{% if event_streams %}
<h4 class="mb-3">Canales disponibles</h4>

<div class="d-flex flex-wrap gap-2 mb-4">
  {% for s in event_streams %}
  <a href="/stream?url={{ s.url | urlencode }}&source={{ s.source | urlencode }}&event={{ event.id }}"
    class="btn btn-stream">
    {{ s.name }}

    {% if s.language %}
    <span class="stream-tag">{{ s.language|upper }}</span>
    {% endif %}
  </a>
  {% endfor %}
</div>
{% else %}
<div class="alert alert-warning">
  No hay canales disponibles para este evento.
</div>
{% endif %}

<a href="/" class="btn btn-secondary">&laquo; Volver</a>

{% endblock %}